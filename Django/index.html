<!DOCTYPE html>
{% load static %}
<html lang="en">
    <head>
        <title>KB IT's your Life</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link
            rel="stylesheet"
            href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css"
        />
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
        <script
            type="text/javascript"
            src="//dapi.kakao.com/v2/maps/sdk.js?appkey=219025cfba1979327f3c84484d93245a"
        ></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <link rel="stylesheet" href="{% static 'css/index.css' %}"/>
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
        <script>
            $(function () {
                //1. 폼에 입력된 값을 다 가지고 ACTION에 연결된 페이지로 이동, 전송…하는 함수
                $("#frm").submit(function (event) {
                    //2. 편의시설에 입력된 값을 각각의 변수에 할당…id에 맞춰서
                    //  alert 창으로 값 확인…폼 초기화, password
                    if ($("#Range_medical").val() >= 7){
                        var medical = 7;
                    }
                    else{
                        var medical = $("#Range_medical").val();
                    } //의료
                    if ($("#Range_facility").val() <= 3){
                        var facility = 0;
                    }
                    else if ($("#Range_facility").val() <= 6){
                        var facility = 1;
                    } 
                    else {
                        var facility = 2;
                    } //복지
                    if ($("#Range_convenient").val() <= 2){
                        var convenient = 0;
                    }
                    else if ($("#Range_convenient").val() <= 5){
                        var convenient = 1;
                    }
                    else if ($("#Range_convenient").val() <= 8){
                        var convenient = 2;
                    }
                    else if (9 <= $("#Range_convenient").val()){
                        var convenient = 3;
                    } //편의
                    if ($("#Range_leisure").val() <= 3){
                        var leisure = $("#Range_leisure").val();
                    }
                    else if ($("#Range_leisure").val() <= 4){
                        var leisure = 3;
                    }
                    else if($("#Range_leisure").val() <= 6){
                        var leisure = 4;
                    }
                    else if($("#Range_leisure").val() <= 8){
                        var leisure = 5;
                    }
                    else if(9 <= $("#Range_leisure").val()){
                        var leisure = 6;
                    } //여가
                    var traffic = parseInt($("#Range_traffic").val())+1; // 교통
                    var restaurant = $("#Range_restaurant").val(); // 식당
                    if ($("#Range_cafe").val() >= 8){
                        var cafe = 8;
                    }
                    else{
                        var cafe = $("#Range_cafe").val();
                    } // cafe
                    if ($("#Range_fastfood").val() <= 3){
                        var fastfood = 0;
                    }
                    else if($("#Range_fastfood").val() <= 6){
                        var fastfood = 1;
                    }
                    else if($("#Range_fastfood").val()){
                        var fastfood = 2;
                    } 
                    if ($("#Range_shopping").val() < 5){
                        var shopping = 0;
                    }
                    else{
                        var shopping = 1;
                    }
                    if ($("#Range_market").val() <= 1){
                        var market = 0;
                    }
                    else if ($("#Range_market").val() <= 3){
                        var market = 1;
                    }
                    else if ($("#Range_market").val() <= 5){
                        var market = 2;
                    }
                    else if ($("#Range_market").val() <= 7){
                        var market = 3;
                    }
                    else if (8 <= $("#Range_market").val()){
                        var market = 4;
                    }
                    var charter_val = $("#charter_select").val();
                    var monthly_val = $("#monthly_select").val();
                    var usr_val = $("#usr").val();

                    //로컬 스토리지에 넣음
                    localStorage.setItem('Range_medical', medical);
                    localStorage.setItem('Range_facility', facility);
                    localStorage.setItem('Range_convenient', convenient);
                    localStorage.setItem('Range_leisure', leisure);
                    localStorage.setItem('Range_restaurant', restaurant);
                    localStorage.setItem('Range_traffic', traffic);
                    localStorage.setItem('Range_fastfood', fastfood);
                    localStorage.setItem('Range_cafe', cafe);
                    localStorage.setItem('Range_market', market);
                    localStorage.setItem('Range_shopping', shopping);
                    localStorage.setItem('charter_select', charter_val);
                    localStorage.setItem('monthly_select', monthly_val);
                    localStorage.setItem('usr', usr_val);


          //alert(medical + security + shopping + market + leisure + convenient + oil + traffic + restaurant + park + charter_val + monthly_val + usr_val);
          // return confirm(medical+shopping+market+convenient+oil+leisure+park+traffic+restaurant);
          //submit 이벤트 작동안하도록 ..기본적인 이벤트 막아주는 함수,…preventDefault()
          //event.preventDefault();

          //
        }); //submit

        $("#charterCheck").click(function () {
            if ($(this).is(":checked")) {
                $("#charter").show();
                $("#ms_charter").show();
            } else {
                if ($("#monthlyCheck").is(":checked")){
                    $("#charter").show();
                } else {
                    $("#charter").hide();
                    $("#ms_charter").hide();
                }
            }
        }); // 전세 클릭시 가격창

        $("#monthlyCheck").click(function () {
            if ($(this).is(":checked")) {
                $("#charter").show();
                $("#monthly").show();
                $("#ms_monthly").show();
                $("#ms_charter").show();
            } else {
                if ($("#charterCheck").is(":checked")){
                    $("#monthly").hide();
                    $("#ms_monthly").hide();
                } else {
                    $("#charter").hide();
                    $("#monthly").hide();
                    $("#ms_monthly").hide();
                    $("#ms_charter").hide();
                }                       
            }
        }); // 월세 클릭시 가격창
        $("#nextbutton").click(function(){
            $("#next_sidebar").show();
            $("#first_sidebar").hide();
            $("#nextbutton").hide();
            $("#prebutton").show();
            $("#submit").show();
         }); // 다음 버튼 누르면 매물조건
         $("#prebutton").click(function(){
            $("#next_sidebar").hide();
            $("#first_sidebar").show();
            $("#nextbutton").show();
            $("#prebutton").hide();
            $("#submit").hide();
         }); // 다음 버튼 누르면 매물조건
      });

            function sidebar_click() {
                if ($("#sidebar").css("display") == "none") {
                    if ($("#facilities").css("display") != "none") {
                        $("#facilities").hide();
                    }
                    $("#sidebar").show();
                } else {
                    $("#sidebar").hide();
                }
            }
            function facilities_click() {
                if ($("#facilities").css("display") == "none") {
                    if ($("#sidebar").css("display") != "none") {
                        $("#sidebar").hide();
                    }
                    $("#facilities").show();
                } else {
                    $("#facilities").hide();
                }
            }
            function facilities_click_change(dong) {
                $("#facilities").show();
                $.ajax({
                    type:'get',
                    url: '/estates/getfacilities?title='+dong,
                    dateType: 'json',
                    success:function(jsonData){
                        var fac = [];
                        fac.push(jsonData.facil.title);
                        fac.push(jsonData.facil.subway);
                        fac.push(jsonData.facil.bus);
                        fac.push(jsonData.facil.book);
                        fac.push(jsonData.facil.golf);
                        fac.push(jsonData.facil.bath);
                        fac.push(jsonData.facil.gas);
                        fac.push(jsonData.facil.laundry);
                        fac.push(jsonData.facil.movie);
                        fac.push(jsonData.facil.bakery);
                        fac.push(jsonData.facil.gym);
                        fac.push(jsonData.facil.hospital);
                        fac.push(jsonData.facil.pharmacy);
                        fac.push(jsonData.facil.medical);
                        fac.push(jsonData.facil.safety);
                        fac.push(jsonData.facil.police);
                        fac.push(jsonData.facil.fire);
                        fac.push(jsonData.facil.park);
                        fac.push(jsonData.facil.karaoke);
                        fac.push(jsonData.facil.billiard);
                        fac.push(jsonData.facil.restaurant);
                        fac.push(jsonData.facil.mart);
                        fac.push(jsonData.facil.shop);
                        // $('#facilities').html(fac)
                        var chart = new CanvasJS.Chart("piechart",
                        {
                            theme: "light2",
                            title:{
                                text: "Gaming Consoles Sold in 2012"
                            },		
                            data: [
                            {       
                                type: "pie",
                                showInLegend: true,
                                toolTipContent: "{y} - #percent %",
                                yValueFormatString: "#,##0,,.## Million",
                                legendText: "{indexLabel}",
                                dataPoints: [
                                    {  y: 4181563, indexLabel: "PlayStation 3" },
                                    {  y: 2175498, indexLabel: "Wii" },
                                    {  y: 3125844, indexLabel: "Xbox 360" },
                                    {  y: 1176121, indexLabel: "Nintendo DS"},
                                    {  y: 1727161, indexLabel: "PSP" },
                                    {  y: 4303364, indexLabel: "Nintendo 3DS"},
                                    {  y: 1717786, indexLabel: "PS Vita"}
                                ]
                            }
                            ]
                        });
                        chart.render();
                    } // callback
                })
            }
        </script>
    </head>
    <body>
        <div class="container-fluid">
            <div class="row flex-nowrap">
                <div class="col-lg-3 bd-sidebar">
                    <ul class="nav">
                        <div class="bodyline">
                            <button
                                type="button"
                                class="btn btn-nav home"
                                id="home"
                                onclick="home()"
                            >
                                <img src="{% static 'img/icon_32_home_nor.svg' %}" alt="" />
                                <p>홈</p>
                            </button>
                            <button
                                type="button"
                                class="btn btn-nav menu"
                                id="sidebarToggle"
                                onclick="sidebar_click()"
                            >
                                <img
                                    src="{% static 'img/icon_menu.png' %}"
                                    width="32px"
                                    height="32px"
                                    alt=""
                                />
                                <p>메뉴</p>
                            </button>
                            <button
                                type="button"
                                class="btn btn-nav menu"
                                id="facilitiesToggle"
                                onclick="facilities_click()"
                            >
                                <img
                                    src="{% static 'img/icon_menu.png' %}"
                                    width="32px"
                                    height="32px"
                                    alt=""
                                />
                                <p>편의시설</p>
                            </button>
                        </div>
                        <div class="tailline">
                        <button
                            type="button"
                            class="btn btn-nav kbland"
                            id="kbicon"
                        >
                            <a href="http://www.kbland.kr" target="_blank">
                                <img
                                    src="{% static "img/kbland.png" %}"
                                    alt=""
                                    width="32px"
                                    height="32px"
                                />
                            </a>
                        </button>
                        </div>
                    </ul>
                    <br/>
                </div>
                <!-- 사이드바 구성 -->
                <div id="sidebar">
                    <div class = "pageHead">
                        <button
                            type="button"
                            class="btn btn-pageback"
                            id="sidebarClose"
                            onclick="sidebar_click()"
                            style= 'float: left'
                        >
                        <span style = 'font-size: 25px;'>〈</span>
                        </button>
                        <h5> TITLE</h4>
                    </div>
                        <form action="{% url 'estates:mamul' %}" method = "POST" id="frm">
                            {% csrf_token %}
                            <div id="first_sidebar">
                                <div class="myhomeCont">
                                        <div class="noti-wrap">
                                            <strong><div style="margin-top:5px; margin-bottom:20px;"><span 
                                                style ='color:#000; 
                                                font-weight:600; 
                                                font-size:28px;'
                                                >
                                                나에게 딱 맞는 동네 찾기
                                            </span></div></strong>
                                            <div style="font-weight:600;">똑똑한 AI가</div>
                                            <div>
                                                <span style = 'font-weight:800; font-size:18px; color: #F0C500;'>
                                                    알.잘.딱.깔.센
                                                </span>으로
                                            </div>
                                            <div style="font-weight:600;">찾아주는 내가 살기 좋은 동네</div>
                                            <div style="margin-top:20px">
                                                <img src="{% static 'img/map.png' %}" alt="" id="mapimg">
                                                </img>
                                            </div>
                                        </div>
                                        <fieldset>
                                            <legend text-align=left>인프라에 따라 중요도를 설정하세요!</legend>
                                    <div class="form-group" id="medical">
                                        <p>의료시설</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_medical"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <datalist id="tickmarks">
                                            <option value="1"></option>
                                            <option value="2"></option>
                                            <option value="3"></option>
                                            <option value="4"></option>
                                            <option value="5"></option>
                                            <option value="6"></option>
                                            <option value="7"></option>
                                            <option value="8"></option>
                                            <option value="9"></option>
                                            <option value="10"></option>
                                        </datalist>
                                        <p>Value: <span id="val_medical"></span></p>
                                        <script>
                                            var result_medical = $("#val_medical");
                                            var slider_medical = $("#Range_medical");
                                            slider_medical.on("input", function () {
                                                result_medical.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class="form-group" id="facility">
                                        <p>생활복지시설</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_facility"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_facility"></span></p>
                                        <script>
                                            var result_security = $("#val_facility");
                                            var slider_security = $("#Range_facility");
                                            slider_security.on("input", function () {
                                                result_security.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class=""></div>
                                    <div class="form-group" id="convenient">
                                        <p>생활편의시설</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_convenient"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_convenient"></span></p>
                                        <script>
                                            var result_shopping = $("#val_convenient");
                                            var slider_shopping = $("#Range_convenient");
                                            slider_shopping.on("input", function () {
                                                result_shopping.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class="form-group" id="leisure">
                                        <p>여가</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_leisure"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_leisure"></span></p>
                                        <script>
                                            var result_market = $("#val_leisure");
                                            var slider_market = $("#Range_leisure");
                                            slider_market.on("input", function () {
                                                result_market.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class=""></div>
                                    <div class="form-group" id="restaurant">
                                        <p>음식점</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_restaurant"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_restaurant"></span></p>
                                        <script>
                                            var result_convenient =
                                                $("#val_restaurant");
                                            var slider_convenient =
                                                $("#Range_restaurant");
                                            slider_convenient.on("input", function () {
                                                result_convenient.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class="form-group" id="traffic">
                                        <p>교통</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_traffic"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_traffic"></span></p>
                                        <script>
                                            var result_leisure = $("#val_traffic");
                                            var slider_leisure = $("#Range_traffic");
                                            slider_leisure.on("input", function () {
                                                result_leisure.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class="form-group" id="fastfood">
                                        <p>패스트푸드</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_fastfood"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_fastfood"></span></p>
                                        <script>
                                            var result_oil = $("#val_fastfood");
                                            var slider_oil = $("#Range_fastfood");
                                            slider_oil.on("input", function () {
                                                result_oil.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class=""></div>
                                    <div class="form-group" id="cafe">
                                        <p>카페</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_cafe"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_cafe"></span></p>
                                        <script>
                                            var result_park = $("#val_cafe");
                                            var slider_park = $("#Range_cafe");
                                            slider_park.on("input", function () {
                                                result_park.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class=""></div>
                                    <div class="form-group" id="market">
                                        <p>장보기</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_market"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_market"></span></p>
                                        <script>
                                            var result_restaurant =
                                                $("#val_market");
                                            var slider_restaurant =
                                                $("#Range_market");
                                            slider_restaurant.on("input", function () {
                                                result_restaurant.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <div class="form-group" id="shopping">
                                        <p>쇼핑</p>
                                        <p></p>
                                        <input
                                            type="range"
                                            class="slider_range"
                                            id="Range_shopping"
                                            value="5"
                                            min="0"
                                            max="10"
                                            step="1" 
                                            list="tickmarks" 
                                        />
                                        <p>Value: <span id="val_shopping"></span></p>
                                        <script>
                                            var result_traffic = $("#val_shopping");
                                            var slider_traffic = $("#Range_shopping");
                                            slider_traffic.on("input", function () {
                                                result_traffic.html($(this).val());
                                            });
                                        </script>
                                    </div>
                                    <button
                                            type="button"
                                            class="btn btn-primary"
                                            id="nextbutton"
                                        >
                                            다음
                                    </button>
                                </div>
                            </div>
                            <!-- 매물 조건 -->
                            <div class="myhomeCont">
                                <div id="next_sidebar" style="display: none;">
                                    <p style="white-space: nowrap">
                                        희망하는 매물의 조건과 가격을 고르세요!
                                    </p>
                                    <div class="Check">
                                        <div
                                            class="custom-control custom-checkbox mb-3"
                                        >
                                            <input
                                                type="checkbox"
                                                class="custom-control-input"
                                                id="charterCheck"
                                            />
                                            <label
                                                class="custom-control-label"
                                                for="charterCheck"
                                                >전세</label
                                            >
                                        </div>
                                        <div
                                            class="custom-control custom-checkbox mb-3"
                                        >
                                            <input
                                                type="checkbox"
                                                class="custom-control-input"
                                                id="monthlyCheck"
                                            />
                                            <label
                                                class="custom-control-label"
                                                for="monthlyCheck"
                                                >월세</label
                                            >
                                        </div>
                                    </div>
                                    <div class="ms" style="display:none" id="ms_charter">
                                        <div class="middle" id="charter">
                                            <div class="multi-range-slider">
                                                
                                                <input type="range" id="input-left2" min="0" max="46" step="1" value="0" />                                                                                                               
                                                <input type="range" id="input-right2" min="0" max="46" step="1" value="46" />
                                                <p><span>보증금</span><span id="val_input-right2" style="float:right" ></span><span id="range_blank2" style="float:right"> ~ </span><span id="val_input-left2" style="float:right"></span></p>
                                                
                                                <script>
                                                    var result_left2 = $("#val_input-left2");
                                                    var slider_left2 = $("#input-left2");
                                                    result_left2.html("0만원 ");
                                                    slider_left2.on("input", function () {
                                                        if (slider_left2.val() == 0){
                                                            result_left2.html("0만원 ");
                                                        }else if(slider_left2.val() == 1){
                                                            result_left2.html("100만원 ");
                                                        }else if(slider_left2.val() == 2){
                                                            result_left2.html("200만원 ");
                                                        }else if(slider_left2.val() == 3){
                                                            result_left2.html("300만원 ");
                                                        }else if(slider_left2.val() == 4){
                                                            result_left2.html("400만원 ");
                                                        }else if(slider_left2.val() == 5){
                                                            result_left2.html("500만원 ");
                                                        }else if(slider_left2.val() == 6){
                                                            result_left2.html("1000만원 ");
                                                        }else if(slider_left2.val() == 7){
                                                            result_left2.html("1500만원 ");
                                                        }else if(slider_left2.val() == 8){
                                                            result_left2.html("2000만원 ");
                                                        }else if(slider_left2.val() == 9){
                                                            result_left2.html("2500만원 ");
                                                        }else if(slider_left2.val() == 10){
                                                            result_left2.html("3000만원 ");
                                                        }else if(slider_left2.val() == 11){
                                                            result_left2.html("3500만원 ");
                                                        }else if(slider_left2.val() == 12){
                                                            result_left2.html("4000만원 ");
                                                        }else if(slider_left2.val() == 13){
                                                            result_left2.html("4500만원 ");
                                                        }else if(slider_left2.val() == 14){
                                                            result_left2.html("5000만원 ");
                                                        }else if(slider_left2.val() == 15){
                                                            result_left2.html("5500만원 ");
                                                        }else if(slider_left2.val() == 16){
                                                            result_left2.html("6000만원 ");
                                                        }else if(slider_left2.val() == 17){
                                                            result_left2.html("6500만원 ");
                                                        }else if(slider_left2.val() == 18){
                                                            result_left2.html("7000만원 ");
                                                        }else if(slider_left2.val() == 19){
                                                            result_left2.html("8000만원 ");
                                                        }else if(slider_left2.val() == 20){
                                                            result_left2.html("9000만원 ");
                                                        }else if(slider_left2.val() == 21){
                                                            result_left2.html("1억원 ");
                                                        }else if(slider_left2.val() == 22){
                                                            result_left2.html("1억 1천만원 ");
                                                        }else if(slider_left2.val() == 23){
                                                            result_left2.html("1억 2천만원 ");
                                                        }else if(slider_left2.val() == 24){
                                                            result_left2.html("1억 3천만원 ");
                                                        }else if(slider_left2.val() == 25){
                                                            result_left2.html("1억 4천만원 ");
                                                        }else if(slider_left2.val() == 26){
                                                            result_left2.html("1억 5천만원 ");
                                                        }else if(slider_left2.val() == 27){
                                                            result_left2.html("1억 6천만원 ");
                                                        }else if(slider_left2.val() == 28){
                                                            result_left2.html("1억 7천만원 ");
                                                        }else if(slider_left2.val() == 29){
                                                            result_left2.html("1억 8천만원 ");
                                                        }else if(slider_left2.val() == 30){
                                                            result_left2.html("1억 9천만원 ");
                                                        }else if(slider_left2.val() == 31){
                                                            result_left2.html("2억원 ");
                                                        }else if(slider_left2.val() == 32){
                                                            result_left2.html("2억 5천만원 ");
                                                        }else if(slider_left2.val() == 33){
                                                            result_left2.html("3억원 ");
                                                        }else if(slider_left2.val() == 34){
                                                            result_left2.html("3억 5천만원 ");
                                                        }else if(slider_left2.val() == 35){
                                                            result_left2.html("4억원 ");
                                                        }else if(slider_left2.val() == 36){
                                                            result_left2.html("4억 5천만원 ");
                                                        }else if(slider_left2.val() == 37){
                                                            result_left2.html("5억원 ");
                                                        }else if(slider_left2.val() == 38){
                                                            result_left2.html("5억 5천만원 ");
                                                        }else if(slider_left2.val() == 39){
                                                            result_left2.html("6억원 ");
                                                        }else if(slider_left2.val() == 40){
                                                            result_left2.html("6억 5천만원 ");
                                                        }else if(slider_left2.val() == 41){
                                                            result_left2.html("7억원 ");
                                                        }else if(slider_left2.val() == 42){
                                                            result_left2.html("7억 5천만원 ");
                                                        }else if(slider_left2.val() == 43){
                                                            result_left2.html("8억원 ");
                                                        }else if(slider_left2.val() == 44){
                                                            result_left2.html("8억 5천만원 ");
                                                        }else if(slider_left2.val() == 45){
                                                            result_left2.html("9억원 ");
                                                        }else{
                                                            result_left2.html("무제한 ");
                                                        }
                                                    });
                                    
                                                    var result_right2 = $("#val_input-right2");
                                                    var slider_right2 = $("#input-right2");
                                                    result_right2.html(" 무제한");
                                                    slider_right2.on("input", function () {
                                                        if (slider_right2.val() == 0){
                                                            result_right2.html(" 0만원");
                                                        }else if(slider_right2.val() == 1){
                                                            result_right2.html(" 100만원");
                                                        }else if(slider_right2.val() == 2){
                                                            result_right2.html(" 200만원");
                                                        }else if(slider_right2.val() == 3){
                                                            result_right2.html(" 300만원");
                                                        }else if(slider_right2.val() == 4){
                                                            result_right2.html(" 400만원");
                                                        }else if(slider_right2.val() == 5){
                                                            result_right2.html(" 500만원");
                                                        }else if(slider_right2.val() == 6){
                                                            result_right2.html(" 1000만원");
                                                        }else if(slider_right2.val() == 7){
                                                            result_right2.html(" 1500만원");
                                                        }else if(slider_right2.val() == 8){
                                                            result_right2.html(" 2000만원");
                                                        }else if(slider_right2.val() == 9){
                                                            result_right2.html(" 2500만원");
                                                        }else if(slider_right2.val() == 10){
                                                            result_right2.html(" 3000만원");
                                                        }else if(slider_right2.val() == 11){
                                                            result_right2.html(" 3500만원");
                                                        }else if(slider_right2.val() == 12){
                                                            result_right2.html(" 4000만원");
                                                        }else if(slider_right2.val() == 13){
                                                            result_right2.html(" 4500만원");
                                                        }else if(slider_right2.val() == 14){
                                                            result_right2.html(" 5000만원");
                                                        }else if(slider_right2.val() == 15){
                                                            result_right2.html(" 5500만원");
                                                        }else if(slider_right2.val() == 16){
                                                            result_right2.html(" 6000만원");
                                                        }else if(slider_right2.val() == 17){
                                                            result_right2.html(" 6500만원");
                                                        }else if(slider_right2.val() == 18){
                                                            result_right2.html(" 7000만원");
                                                        }else if(slider_right2.val() == 19){
                                                            result_right2.html(" 8000만원");
                                                        }else if(slider_right2.val() == 20){
                                                            result_right2.html(" 9000만원");
                                                        }else if(slider_right2.val() == 21){
                                                            result_right2.html(" 1억원");
                                                        }else if(slider_right2.val() == 22){
                                                            result_right2.html(" 1억 1천만원");
                                                        }else if(slider_right2.val() == 23){
                                                            result_right2.html(" 1억 2천만원");
                                                        }else if(slider_right2.val() == 24){
                                                            result_right2.html(" 1억 3천만원");
                                                        }else if(slider_right2.val() == 25){
                                                            result_right2.html(" 1억 4천만원");
                                                        }else if(slider_right2.val() == 26){
                                                            result_right2.html(" 1억 5천만원");
                                                        }else if(slider_right2.val() == 27){
                                                            result_right2.html(" 1억 6천만원");
                                                        }else if(slider_right2.val() == 28){
                                                            result_right2.html(" 1억 7천만원");
                                                        }else if(slider_right2.val() == 29){
                                                            result_right2.html(" 1억 8천만원");
                                                        }else if(slider_right2.val() == 30){
                                                            result_right2.html(" 1억 9천만원");
                                                        }else if(slider_right2.val() == 31){
                                                            result_right2.html(" 2억원");
                                                        }else if(slider_right2.val() == 32){
                                                            result_right2.html(" 2억 5천만원");
                                                        }else if(slider_right2.val() == 33){
                                                            result_right2.html(" 3억원");
                                                        }else if(slider_right2.val() == 34){
                                                            result_right2.html(" 3억 5천만원");
                                                        }else if(slider_right2.val() == 35){
                                                            result_right2.html(" 4억원");
                                                        }else if(slider_right2.val() == 36){
                                                            result_right2.html(" 4억 5천만원");
                                                        }else if(slider_right2.val() == 37){
                                                            result_right2.html(" 5억원");
                                                        }else if(slider_right2.val() == 38){
                                                            result_right2.html(" 5억 5천만원");
                                                        }else if(slider_right2.val() == 39){
                                                            result_right2.html(" 6억원");
                                                        }else if(slider_right2.val() == 40){
                                                            result_right2.html(" 6억 5천만원");
                                                        }else if(slider_right2.val() == 41){
                                                            result_right2.html(" 7억원");
                                                        }else if(slider_right2.val() == 42){
                                                            result_right2.html(" 7억 5천만원");
                                                        }else if(slider_right2.val() == 43){
                                                            result_right2.html(" 8억원");
                                                        }else if(slider_right2.val() == 44){
                                                            result_right2.html(" 8억 5천만원");
                                                        }else if(slider_right2.val() == 45){
                                                            result_right2.html(" 9억원");
                                                        }else{
                                                            result_right2.html(" 무제한");
                                                        }
                                                    });


                                                </script>
                                                <div class="custom_slider2">
                                                    <div class="track"></div>
                                                    <div class="range" id="silder_range"></div>
                                                    <div class="thumb left" id="thumb_left"></div>
                                                    <div class="thumb right" id ="thumb_right"></div>
                                                </div>                                        
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ms" style="display:none" id="ms_monthly">
                                        <div class="middle" id="monthly">
                                            <div class="multi-range-slider">
                                                
                                                <input type="range" id="input-left" min="0" max="33" value="0" />
                                                                                                                        
                                                <input type="range" id="input-right" min="0" max="33"  value="33" />
                                                <p><span>월세</span><span id="val_input-right" style="float:right"></span><span id="range_blank" style="float:right"> ~ </span><span id="val_input-left" style="float:right"></span></p>
                                                
                                                <script>
                                                    var result_left = $("#val_input-left");
                                                    var slider_left = $("#input-left");
                                                    result_left.html("0만원 ");
                                                    slider_left.on("input", function () {
                                                        if (slider_left.val() == 0){
                                                            result_left.html("0만원 ");
                                                        }else if (slider_left.val() == 1){
                                                            result_left.html("5만원 ");
                                                        }else if(slider_left.val() == 2){
                                                            result_left.html("10만원 ");
                                                        }else if(slider_left.val() == 3){
                                                            result_left.html("15만원 ");
                                                        }else if(slider_left.val() == 4){
                                                            result_left.html("20만원 ");
                                                        }else if(slider_left.val() == 5){
                                                            result_left.html("25만원 ");
                                                        }else if(slider_left.val() == 6){
                                                            result_left.html("30만원 ");
                                                        }else if(slider_left.val() == 7){
                                                            result_left.html("35만원 ");
                                                        }else if(slider_left.val() == 8){
                                                            result_left.html("40만원 ");
                                                        }else if(slider_left.val() == 9){
                                                            result_left.html("45만원 ");
                                                        }else if(slider_left.val() == 10){
                                                            result_left.html("50만원 ");
                                                        }else if(slider_left.val() == 11){
                                                            result_left.html("55만원 ");
                                                        }else if(slider_left.val() == 12){
                                                            result_left.html("60만원 ");
                                                        }else if(slider_left.val() == 13){
                                                            result_left.html("65만원 ");
                                                        }else if(slider_left.val() == 14){
                                                            result_left.html("70만원 ");
                                                        }else if(slider_left.val() == 15){
                                                            result_left.html("75만원 ");
                                                        }else if(slider_left.val() == 16){
                                                            result_left.html("80만원 ");
                                                        }else if(slider_left.val() == 17){
                                                            result_left.html("85만원 ");
                                                        }else if(slider_left.val() == 18){
                                                            result_left.html("90만원 ");
                                                        }else if(slider_left.val() == 19){
                                                            result_left.html("95만원 ");
                                                        }else if(slider_left.val() == 20){
                                                            result_left.html("100만원 ");
                                                        }else if(slider_left.val() == 21){
                                                            result_left.html("110만원 ");
                                                        }else if(slider_left.val() == 22){
                                                            result_left.html("120만원 ");
                                                        }else if(slider_left.val() == 23){
                                                            result_left.html("130만원 ");
                                                        }else if(slider_left.val() == 24){
                                                            result_left.html("140만원 ");
                                                        }else if(slider_left.val() == 25){
                                                            result_left.html("150만원 ");
                                                        }else if(slider_left.val() == 26){
                                                            result_left.html("160만원 ");
                                                        }else if(slider_left.val() == 27){
                                                            result_left.html("170만원 ");
                                                        }else if(slider_left.val() == 28){
                                                            result_left.html("180만원 ");
                                                        }else if(slider_left.val() == 29){
                                                            result_left.html("190만원 ");
                                                        }else if(slider_left.val() == 30){
                                                            result_left.html("200만원 ");
                                                        }else if(slider_left.val() == 31){
                                                            result_left.html("250만원 ");
                                                        }else if(slider_left.val() == 32){
                                                            result_left.html("300만원 ");
                                                        }else{
                                                            result_left.html("무제한 ");
                                                        }
                                                    });
                                    
                                                    var result_right = $("#val_input-right");
                                                    var slider_right = $("#input-right");
                                                    result_right.html(" 무제한");
                                                    slider_right.on("input", function () {
                                                        if (slider_right.val() == 0){
                                                            result_right.html(" 0만원");
                                                        }else if (slider_right.val() == 1){
                                                            result_right.html(" 5만원");
                                                        }else if(slider_right.val() == 2){
                                                            result_right.html(" 10만원");
                                                        }else if(slider_right.val() == 3){
                                                            result_right.html(" 15만원");
                                                        }else if(slider_right.val() == 4){
                                                            result_right.html(" 20만원");
                                                        }else if(slider_right.val() == 5){
                                                            result_right.html(" 25만원");
                                                        }else if(slider_right.val() == 6){
                                                            result_right.html(" 30만원");
                                                        }else if(slider_right.val() == 7){
                                                            result_right.html(" 35만원");
                                                        }else if(slider_right.val() == 8){
                                                            result_right.html(" 40만원");
                                                        }else if(slider_right.val() == 9){
                                                            result_right.html(" 45만원");
                                                        }else if(slider_right.val() == 10){
                                                            result_right.html(" 50만원");
                                                        }else if(slider_right.val() == 11){
                                                            result_right.html(" 55만원");
                                                        }else if(slider_right.val() == 12){
                                                            result_right.html(" 60만원");
                                                        }else if(slider_right.val() == 13){
                                                            result_right.html(" 65만원");
                                                        }else if(slider_right.val() == 14){
                                                            result_right.html(" 70만원");
                                                        }else if(slider_right.val() == 15){
                                                            result_right.html(" 75만원");
                                                        }else if(slider_right.val() == 16){
                                                            result_right.html(" 80만원");
                                                        }else if(slider_right.val() == 17){
                                                            result_right.html(" 85만원");
                                                        }else if(slider_right.val() == 18){
                                                            result_right.html(" 90만원");
                                                        }else if(slider_right.val() == 19){
                                                            result_right.html(" 95만원");
                                                        }else if(slider_right.val() == 20){
                                                            result_right.html(" 100만원");
                                                        }else if(slider_right.val() == 21){
                                                            result_right.html(" 110만원");
                                                        }else if(slider_right.val() == 22){
                                                            result_right.html(" 120만원");
                                                        }else if(slider_right.val() == 23){
                                                            result_right.html(" 130만원");
                                                        }else if(slider_right.val() == 24){
                                                            result_right.html(" 140만원");
                                                        }else if(slider_right.val() == 25){
                                                            result_right.html(" 150만원");
                                                        }else if(slider_right.val() == 26){
                                                            result_right.html(" 160만원");
                                                        }else if(slider_right.val() == 27){
                                                            result_right.html(" 170만원");
                                                        }else if(slider_right.val() == 28){
                                                            result_right.html(" 180만원");
                                                        }else if(slider_right.val() == 29){
                                                            result_right.html(" 190만원");
                                                        }else if(slider_right.val() == 30){
                                                            result_right.html(" 200만원");
                                                        }else if(slider_right.val() == 31){
                                                            result_right.html(" 250만원");
                                                        }else if(slider_right.val() == 32){
                                                            result_right.html(" 300만원");
                                                        }else{
                                                            result_right.html(" 무제한");
                                                        }
                                                    });
                                                </script>
                                                <div class="custom_slider">
                                                    <div class="track"></div>
                                                    <div class="range" id="silder_range"></div>
                                                    <div class="thumb left" id="thumb_left"></div>
                                                    <div class="thumb right" id ="thumb_right"></div>
                                                </div>                                        
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="usr">직장의 위치..?</label>
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="usr"
                                        />
                                    </div>
                                </div>
                                <div>
                                    <button
                                        type="button"
                                        class="btn btn-primary"
                                        id="prebutton"
                                        style="display: none;"
                                    >
                                        이전
                                    </button>
                                    <button
                                        type="submit"
                                        class="btn btn-primary"
                                        id="submit"
                                        style="display: none;"
                                    >
                                        Submit
                                    </button>
                                </div>
                            </div>
                            <br /><br /><br /><br /><br />
                        </form>
                    </fieldset>
                </div>
                <!-- sidebar -->
                <div id="facilities">
                    <div id='piechart' width='100%' height='500px'></div>
                </div>
                <main class="col-lg-9 bd-content nopadding" role="main">
                    <div id="map"></div>
                    <script>
                        var mapContainer = document.getElementById("map"), // 지도를 표시할 div
                            mapOption = {
                                center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
                                level: 9, // 지도의 확대 레벨
                            };

                        home();

                        function home() {
                        $("#sidebar").hide();
                        $("#facilities").hide();
                        var map = new kakao
                            .maps
                            .Map(mapContainer, mapOption),
                            customOverlay = new kakao
                            .maps
                            .CustomOverlay({}),
                            infowindow = new kakao
                            .maps
                            .InfoWindow({removable: true});
                        var x_positions = [];
                        var y_positions = [];
                        var dong_names = [];
                        var sum = [];

                        $.getJSON("{% static 'json/real.geojson' %}", function (geojson) {
                            var data = geojson.features;
                            var coordinates = []; //좌표 저장할 배열
                            var name = ""; //구 이름 저장

                            $.each(data, function (index, val) {
                            coordinates = val.geometry.coordinates;
                            name = val.properties.SIG_KOR_NM;
                            displayArea(coordinates, name);
                            });
                        });

                        var polygons = []; //클릭시 폴리곤 없앨때 사용 예정

                        function displayArea(coordinates, name) {
                            var path = []; //폴리곤 그려줄 path
                            var points = []; //중심좌표 구하기 위한 지역구 좌표들

                            $.each(coordinates[0], function (index, coordinate) {
                            var point = new Object();
                            point.x = coordinate[1];
                            point.y = coordinate[0];
                            points.push(point);
                            path.push(new kakao.maps.LatLng(coordinate[1], coordinate[0])); //json에 좌표순서가 반대로 되있어서 요래 해줌.
                            });

                            //다각형 생성
                            var polygon = new kakao
                            .maps
                            .Polygon({
                                map: map, //다각형 표시할 지도 객체
                                path: path,
                                strokeWeight: 2,
                                strokeColor: "#004c80",
                                strokeOpacity: 0.8,
                                fillColor: "#fff",
                                fillOpacity: 0.7
                            });
                            polygons.push(polygon); //나중에 특정 구 누르면 확대 될때 폴리곤 없애야해서 만들어줬음

                            //다각형에 mouseover 이벤트 등록, 발생시 색 변경
                            // 지역명 표시하는 커스텀오버레이 표시

                            kakao
                            .maps
                            .event
                            .addListener(polygon, "mouseover", function (mouseEvent) {
                                polygon.setOptions({fillColor: "#09f"});

                                customOverlay.setContent('<div class="area">' + name + "</div>");

                                customOverlay.setPosition(mouseEvent.latLng);
                                customOverlay.setMap(map);
                            });
                            // 다각형에 mousemove 이벤트를 등록하고 이벤트가 발생하면 커스텀 오버레이의 위치를 변경합니다
                            kakao
                            .maps
                            .event
                            .addListener(polygon, "mousemove", function (mouseEvent) {
                                customOverlay.setPosition(mouseEvent.latLng);
                            });

                            // 다각형에 mouseout 이벤트를 등록하고 이벤트가 발생하면 폴리곤의 채움색을 원래색으로 변경합니다
                            // 커스텀 오버레이를 지도에서 제거합니다
                            kakao
                            .maps
                            .event
                            .addListener(polygon, "mouseout", function () {
                                polygon.setOptions({fillColor: "#fff"});
                                customOverlay.setMap(null);
                            });

                            //다각형에 click이벤트를 등록하고 이벤트가 발생하면 해당 지역을 확대.
                            kakao
                            .maps
                            .event
                            .addListener(polygon, "click", function () {
                                deletepolygon(polygons); //해당지역 확대 후 폴리곤 제거
                                customOverlay.setContent('<div class="area" style="display:none;">' + name + "</div>");
                                //3레벨 확대
                                var level = map.getLevel() - 2;
                                var a,
                                b;
                                $.getJSON("{% static 'json/구별 중심좌표.json' %}", function (json) {
                                var data = json;
                                $.each(data, function (index, item) {
                                    if (item.자치구명 == name) {
                                    a = item.X;
                                    b = item.Y;

                                    }
                                }); //each
                                map.setLevel(level, {
                                    anchor: new kakao
                                    .maps
                                    .LatLng(a, b),
                                    animate: {
                                    duration: 500
                                    }
                                });
                                });

                                $.getJSON("{% static 'json/동시각화 전용.json' %}", function (json) {
                                var data = json;

                                $.each(data, function (index, item) {
                                    if (item.자치구명 == name) {
                                    var dong = item.법정동명;
                                    var X = item.position_x;
                                    var Y = item.position_y;
                                    var s = item.합계;
                                    x_positions.push(X);
                                    y_positions.push(Y);
                                    dong_names.push(dong);
                                    sum.push(s);
                                    }
                                }); //법정동 마커 찍기위해 좌표,법정동이름,합계 저장하기
                                var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png'";
                                var imageSize = new kakao
                                    .maps
                                    .Size(34, 35);
                                var imageOption = {
                                    offset: new kakao
                                    .maps
                                    .Point(17, 36)
                                };
                                var markerImage = new kakao
                                    .maps
                                    .MarkerImage(imageSrc, imageSize, imageOption);

                                var markerTmp; // 마커
                                var customOverlay; // 오버레이
                                var contentStr;

                                for (var i = 0; i < y_positions.length; i++) {
                                    contentStr = "<button class='customoverlay' val='" + dong_names[i] + "'><div class='title'>" + sum[i] + "</div><div class = 'dong_' val='" + dong_names[i] + "'>" + dong_names[i] + "</div></button>";
                                    customOverlay = new kakao
                                    .maps
                                    .CustomOverlay({
                                        map: map,
                                        position: new kakao
                                        .maps
                                        .LatLng(x_positions[i], y_positions[i]),
                                        content: contentStr,
                                        yAnchor: 1
                                    });
                                } //for문facilities_click_change
                                $('.customoverlay').click(function () {
                                    facilities_click_change($(this).attr('val'));
                                });
                                }); //동시각화 전용 getjson

                            });
                        }

                        function deletepolygon(polygons) {
                            for (var i = 0; i < polygons.length; i++) {
                            polygons[i].setMap(null);
                            }
                            polygons = [];
                        }
                        var zoomControl = new kakao
                            .maps
                            .ZoomControl();
                        map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

                        // 지도가 확대 또는 축소되면 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
                        kakao
                            .maps
                            .event
                            .addListener(map, 'zoom_changed', function () {

                            // 지도의 현재 레벨을 얻어옵니다
                            var level = map.getLevel();
                            });
                        }
                    </script>
                </main>
            </div>
        </div>
    </body>
<script>
    // 이 아래 전부 양방향 range1

    var inputLeft = document.getElementById("input-left");
    var inputRight = document.getElementById("input-right");

    var thumbLeft = document.querySelector(".custom_slider > .thumb.left");
    var thumbRight = document.querySelector(".custom_slider > .thumb.right");
    var range = document.querySelector(".custom_slider > .range");

    function setLeftValue() {
        var _this = inputLeft,
            min = parseInt(_this.min),
            max = parseInt(_this.max);
    
        _this.value = Math.min(parseInt(_this.value), parseInt(inputRight.value) - 1);
    
        var percent = ((_this.value - min) / (max - min)) * 100;
    
        thumbLeft.style.left = percent + "%";
        range.style.left = percent + "%";
    }
    setLeftValue();

    function setRightValue() {
        var _this = inputRight,
            min = parseInt(_this.min),
            max = parseInt(_this.max);
    
        _this.value = Math.max(parseInt(_this.value), parseInt(inputLeft.value) + 1);
    
        var percent = ((_this.value - min) / (max - min)) * 100;
    
        thumbRight.style.right = (100 - percent) + "%";
        range.style.right = (100 - percent) + "%";
    }
    setRightValue();
    
    inputLeft.addEventListener("input", setLeftValue);
    inputRight.addEventListener("input", setRightValue);
    

    // 이 아래 전부 양방향 range2
    var inputLeft2 = document.getElementById("input-left2");
    var inputRight2 = document.getElementById("input-right2");

    var thumbLeft2 = document.querySelector(".custom_slider2 > .thumb.left");
    var thumbRight2 = document.querySelector(".custom_slider2 > .thumb.right");
    var range2 = document.querySelector(".custom_slider2 > .range");

    function setLeftValue2() {
        var _this2 = inputLeft2,
            min2 = parseInt(_this2.min),
            max2 = parseInt(_this2.max);
    
        _this2.value = Math.min(parseInt(_this2.value), parseInt(inputRight2.value) - 1);
    
        var percent2 = ((_this2.value - min2) / (max2 - min2)) * 100;
    
        thumbLeft2.style.left = percent2 + "%";
        range2.style.left = percent2 + "%";
    }
    setLeftValue2();

    function setRightValue2() {
        var _this2 = inputRight2,
            min2 = parseInt(_this2.min),
            max2 = parseInt(_this2.max);
    
        _this2.value = Math.max(parseInt(_this2.value), parseInt(inputLeft2.value) + 1);
    
        var percent2 = ((_this2.value - min2) / (max2 - min2)) * 100;
    
        thumbRight2.style.right = (100 - percent2) + "%";
        range2.style.right = (100 - percent2) + "%";
    }
    setRightValue2();
    
    inputLeft2.addEventListener("input", setLeftValue2);
    inputRight2.addEventListener("input", setRightValue2);
    
</script>
</html>
